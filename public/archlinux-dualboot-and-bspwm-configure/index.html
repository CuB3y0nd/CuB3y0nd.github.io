<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Arch Linux 双系统 &#43; Bspwm 配置小记 - CuB3y0nd&#39;s Blog</title><meta name="author" content="CuB3y0nd">
<meta name="author-link" content="">
<meta name="description" content="首先 flex 一下成品图
" /><meta name="keywords" content='Arch Linux, Bspwm' /><meta itemprop="name" content="Arch Linux 双系统 &#43; Bspwm 配置小记">
<meta itemprop="description" content="首先 flex 一下成品图
"><meta itemprop="datePublished" content="2023-07-29T13:36:00+08:00" />
<meta itemprop="dateModified" content="2023-07-29T13:36:00+08:00" />
<meta itemprop="wordCount" content="3362">
<meta itemprop="keywords" content="Arch Linux,Bspwm," /><meta property="og:title" content="Arch Linux 双系统 &#43; Bspwm 配置小记" />
<meta property="og:description" content="首先 flex 一下成品图
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-29T13:36:00+08:00" />
<meta property="article:modified_time" content="2023-07-29T13:36:00+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Arch Linux 双系统 &#43; Bspwm 配置小记"/>
<meta name="twitter:description" content="首先 flex 一下成品图
"/>
<meta name="application-name" content="CuB3y0nd">
<meta name="apple-mobile-web-app-title" content="CuB3y0nd"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/" /><link rel="prev" href="https://www.cubeyond.net/ic-card-replay-attack/" /><link rel="next" href="https://www.cubeyond.net/chinese-copywriting-guidelines/" /><link rel="stylesheet" href="/css/style.min.29568ef09d5311a3c0f1f3acaad398cdcf484d09bc243d4f17611357380e451d.css" integrity="sha256-KVaO8J1TEaPA8fOsqtOYzc9ITQm8JD1PF2ETVzgORR0="><link rel="stylesheet" href="/lib/fontawesome-free/all.min.01b035efb5dfa529c512f82962ed633328222da6f33c224244806d4798c67349.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k="><link rel="stylesheet" href="/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css" integrity="sha256-X7rrn44l1&#43;AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8="><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Arch Linux 双系统 + Bspwm 配置小记",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/www.cubeyond.net\/archlinux-dualboot-and-bspwm-configure\/"
    },"genre": "posts","keywords": "Arch Linux, Bspwm","wordcount":  3362 ,
    "url": "https:\/\/www.cubeyond.net\/archlinux-dualboot-and-bspwm-configure\/","datePublished": "2023-07-29T13:36:00+08:00","dateModified": "2023-07-29T13:36:00+08:00","publisher": {
      "@type": "Organization",
      "name": "CuB3y0nd","logo": "https:\/\/www.cubeyond.net\/logo.svg"},"author": {
        "@type": "Person",
        "name": "CuB3y0nd"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper" data-github-corner="right">
    <div class="header-title">
      <a href="/" title="CuB3y0nd&#39;s Blog"><img loading="lazy" src="/logo.svg" srcset="/logo.svg, /logo.svg 1.5x, /logo.svg 2x" sizes="auto" data-title="CuB3y0nd&#39;s Blog" data-alt="CuB3y0nd&#39;s Blog" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CuB3y0nd&#39;s Blog</span></a><span id="typeit-header-subtitle-desktop" class="typeit header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/about/"
                
                
              ><i class="fa-solid fa-circle-info fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容…" id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li><li class="menu-item language-switch">
            <span role="button" aria-label="选择语言" title="选择语言"><i class="fa-solid fa-language fa-fw" aria-hidden="true"></i></span>
            <ul class="sub-menu"><li class="menu-item">没有更多翻译</li></ul>
          </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="CuB3y0nd&#39;s Blog"><img loading="lazy" src="/logo.svg" srcset="/logo.svg, /logo.svg 1.5x, /logo.svg 2x" sizes="auto" data-title="/logo.svg" data-alt="/logo.svg" class="logo" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/><span class="header-title-text">CuB3y0nd&#39;s Blog</span></a><span id="typeit-header-subtitle-mobile" class="typeit header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容…" id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/about/"
                  
                  
                ><i class="fa-solid fa-circle-info fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="切换主题"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span><span class="menu-system-item language-switch">
              <span role="button" aria-label="选择语言" title="选择语言">简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden="true"></i></span>
              <select class="language-select" onchange="location = this.value;"><option disabled>没有更多翻译</option></select>
            </span></li>
      </ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><nav aria-label="breadcrumb" class="breadcrumb-container sticky">
    <ol class="breadcrumb"><li class="breadcrumb-item"><a href="/posts/" title="Posts">Posts</a></li><li class="breadcrumb-item active" aria-current="page">Arch Linux 双系统 &#43; Bspwm 配置小记</li>
    </ol>
  </nav><main class="container"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom">
    </aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span>Arch Linux 双系统 &#43; Bspwm 配置小记</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><img loading="lazy" src="/images/avatar.jpg" srcset="/images/avatar.jpg, /images/avatar.jpg 1.5x, /images/avatar.jpg 2x" sizes="auto" data-title="CuB3y0nd" data-alt="CuB3y0nd" class="avatar" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/>&nbsp;CuB3y0nd</span></span>
          <span class="post-category">收录于 <a href="/categories/arch-linux/"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Arch Linux</a></span></div>
      <div class="post-meta-line"><span title="发布于 2023-07-29 13:36:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden="true"></i><time datetime="2023-07-29">2023-07-29</time></span>&nbsp;<span title="更新于 2023-07-29 13:36:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden="true"></i><time datetime="2023-07-29">2023-07-29</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>约 3362 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>预计阅读 7 分钟</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#首先-flex-一下成品图">首先 flex 一下成品图</a></li>
    <li><a href="#分区方案规划">分区方案规划</a></li>
    <li><a href="#确认-efi-分区-大小">确认 EFI 分区 大小</a></li>
    <li><a href="#确认分区表类型">确认分区表类型</a>
      <ul>
        <li><a href="#方法一">方法一</a></li>
        <li><a href="#方法二">方法二</a></li>
      </ul>
    </li>
    <li><a href="#划分空间">划分空间</a></li>
    <li><a href="#关闭快速启动并关闭休眠">关闭快速启动并关闭休眠</a></li>
    <li><a href="#准备安装盘">准备安装盘</a></li>
    <li><a href="#关闭-secure-boot">关闭 Secure Boot</a></li>
    <li><a href="#arch-linux-系统安装">Arch Linux 系统安装</a>
      <ul>
        <li><a href="#调大显示字体">调大显示字体</a></li>
        <li><a href="#确认是否为-uefi">确认是否为 UEFI</a></li>
        <li><a href="#禁用并停止自动匹配最快源服务">禁用并停止自动匹配最快源服务</a></li>
        <li><a href="#设置时区">设置时区</a></li>
        <li><a href="#分区">分区</a></li>
        <li><a href="#格式化分区">格式化分区</a></li>
        <li><a href="#挂载分区">挂载分区</a></li>
        <li><a href="#换源">换源</a></li>
        <li><a href="#安装基础软件包">安装基础软件包</a></li>
        <li><a href="#生成-fstab">生成 fstab</a></li>
        <li><a href="#挂载-mnt-分区">挂载 /mnt 分区</a></li>
        <li><a href="#设置用户和密码">设置用户和密码</a></li>
        <li><a href="#设置系统语言">设置系统语言</a></li>
        <li><a href="#设置主机名和-hosts我的主机名是ashes">设置主机名和 hosts（我的主机名是ASHES）</a></li>
        <li><a href="#设置时区并同步">设置时区并同步</a></li>
        <li><a href="#双系统引导设置">双系统引导设置</a></li>
        <li><a href="#安装-uefi">安装 UEFI</a></li>
        <li><a href="#生成-grub-配置">生成 grub 配置</a></li>
        <li><a href="#设置网络服务开机自启">设置网络服务开机自启</a></li>
        <li><a href="#结束安装取消所有挂载点并重启">结束安装，取消所有挂载点并重启</a></li>
      </ul>
    </li>
    <li><a href="#bspwm">Bspwm</a>
      <ul>
        <li><a href="#下载脚本">下载脚本</a></li>
        <li><a href="#授予执行权限">授予执行权限</a></li>
        <li><a href="#运行脚本">运行脚本</a></li>
      </ul>
    </li>
    <li><a href="#amd--nvidia-双显卡驱动安装">AMD + NVIDIA 双显卡驱动安装</a>
      <ul>
        <li><a href="#基础包安装">基础包安装</a></li>
        <li><a href="#配置-optimus-manager">配置 optimus-manager</a></li>
        <li><a href="#防止内核冲突">防止内核冲突</a></li>
        <li><a href="#切换教程">切换教程</a></li>
      </ul>
    </li>
    <li><a href="#faq">FAQ</a>
      <ul>
        <li><a href="#这个-bspwm-提供了哪些快捷键">这个 bspwm 提供了哪些快捷键？</a></li>
        <li><a href="#eww-无法编译部分使用-eww-小组件-的主题eg-z0mbi3无法使用">eww 无法编译/部分使用 eww 小组件 的主题（e.g. z0mbi3）无法使用</a></li>
        <li><a href="#为什么有网络但是状态栏始终显示-offline">为什么有网络但是状态栏始终显示 Offline？</a></li>
        <li><a href="#你的-bspwm-不适配我的显示器分辨率我该怎么调整">你的 bspwm 不适配我的显示器分辨率，我该怎么调整？</a></li>
        <li><a href="#为什么我的-neovim-图标显示不出来">为什么我的 neovim 图标显示不出来？</a></li>
        <li><a href="#neovim-打开一堆报错">neovim 打开一堆报错</a></li>
        <li><a href="#更多问题都请移步-wiki">更多问题都请移步 wiki</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><h2 id="首先-flex-一下成品图">首先 flex 一下成品图</h2>
<hr>
<p><a class="lightgallery" href="https://s1.ax1x.com/2023/07/29/pPSYjwn.png" data-thumbnail="https://s1.ax1x.com/2023/07/29/pPSYjwn.png" data-sub-html="<h2>Showcase-1</h2>"><img loading="lazy" src="https://s1.ax1x.com/2023/07/29/pPSYjwn.png" srcset="https://s1.ax1x.com/2023/07/29/pPSYjwn.png, https://s1.ax1x.com/2023/07/29/pPSYjwn.png 1.5x, https://s1.ax1x.com/2023/07/29/pPSYjwn.png 2x" sizes="auto" data-title="Showcase-1" data-alt="Showcase-1" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></a></p>
<p><a class="lightgallery" href="https://s1.ax1x.com/2023/07/29/pPSYzF0.png" data-thumbnail="https://s1.ax1x.com/2023/07/29/pPSYzF0.png" data-sub-html="<h2>Showcase-2</h2>"><img loading="lazy" src="https://s1.ax1x.com/2023/07/29/pPSYzF0.png" srcset="https://s1.ax1x.com/2023/07/29/pPSYzF0.png, https://s1.ax1x.com/2023/07/29/pPSYzF0.png 1.5x, https://s1.ax1x.com/2023/07/29/pPSYzF0.png 2x" sizes="auto" data-title="Showcase-2" data-alt="Showcase-2" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></a></p>
<p><a class="lightgallery" href="https://s1.ax1x.com/2023/07/29/pPStSYV.png" data-thumbnail="https://s1.ax1x.com/2023/07/29/pPStSYV.png" data-sub-html="<h2>Showcase-3</h2>"><img loading="lazy" src="https://s1.ax1x.com/2023/07/29/pPStSYV.png" srcset="https://s1.ax1x.com/2023/07/29/pPStSYV.png, https://s1.ax1x.com/2023/07/29/pPStSYV.png 1.5x, https://s1.ax1x.com/2023/07/29/pPStSYV.png 2x" sizes="auto" data-title="Showcase-3" data-alt="Showcase-3" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></a></p>
<p><a class="lightgallery" href="https://s1.ax1x.com/2023/07/29/pPStpWT.png" data-thumbnail="https://s1.ax1x.com/2023/07/29/pPStpWT.png" data-sub-html="<h2>Showcase-4</h2>"><img loading="lazy" src="https://s1.ax1x.com/2023/07/29/pPStpWT.png" srcset="https://s1.ax1x.com/2023/07/29/pPStpWT.png, https://s1.ax1x.com/2023/07/29/pPStpWT.png 1.5x, https://s1.ax1x.com/2023/07/29/pPStpWT.png 2x" sizes="auto" data-title="Showcase-4" data-alt="Showcase-4" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></a></p>
<hr>
<h2 id="分区方案规划">分区方案规划</h2>
<p>首先确定你要给 <code>Arch Linux</code> 划分多少内存。因为我电脑里是一块 1TB 的硬盘，
所以我分了 512GB 给它，剩下的都留着给 Windows 用。</p>
<p>一个比较通用的方案是分以下三个区：</p>
<ul>
<li>EFI 分区：/efi 800MB</li>
<li>根分区：/ 100GB</li>
<li>用户主目录：/home 剩余全部</li>
</ul>
<p>我设想的 Linux 分区方案如下：</p>
<ul>
<li>4GB EFI</li>
<li>200GB root</li>
<li>300GB home</li>
<li>8GB swap</li>
</ul>
<p><code>swap</code> 分区 虽然不一定用得上，但是个人建议分一下。一般设置为 <code>RAM</code> 的一半。
不想给那么多的也可以直接给 2GB。</p>
<p>因为某些原因，我给 <code>EFI 分区</code> 4GB，实际上这个分区使用 800MB 即可。</p>
<h2 id="确认-efi-分区-大小">确认 EFI 分区 大小</h2>
<p>首先要确认 Windows 的 <code>EFI 分区</code> 大小是多少。如果你是 <em>Win 10/Win 11</em>，
按 <code>Win + X</code> 打开 <strong>磁盘管理器</strong>，在 <strong>磁盘 0</strong> 那块找到括号里写 <strong>EFI 系统分区</strong>
的那部分分区大小，记录下来，后面要用到。我这里是 100MB。</p>
<h2 id="确认分区表类型">确认分区表类型</h2>
<p>本篇文章仅针对使用 <strong>GPT 分区表</strong> 的用户，如果你是 MBR 的话部分安装指令
需要修改，不能照抄。这里提供两种确认方式：</p>
<h3 id="方法一">方法一</h3>
<p>在 <strong>磁盘管理器</strong> 中，右键 <strong>磁盘 0</strong> 选择 <strong>属性</strong> 点击 <strong>卷</strong>，
查看 <strong>磁盘分区形式</strong> 是否为 <code>GPT 分区表</code> 。</p>
<h3 id="方法二">方法二</h3>
<p>部分用户右键 <strong>磁盘 0</strong> 可能会发现属性按钮是灰色的，无法点击，
这里提供一种命令行的解决方案：「<code>Win + R</code> 输入 <code>diskpart</code> 回车，
在打开的命令行窗口中输入 <code>list disk</code> 指令」，输出结果如下：</p>
<p><a class="lightgallery" href="https://s1.ax1x.com/2023/07/29/pPS8zFK.png" data-thumbnail="https://s1.ax1x.com/2023/07/29/pPS8zFK.png" data-sub-html="<h2>diskpart</h2>"><img loading="lazy" src="https://s1.ax1x.com/2023/07/29/pPS8zFK.png" srcset="https://s1.ax1x.com/2023/07/29/pPS8zFK.png, https://s1.ax1x.com/2023/07/29/pPS8zFK.png 1.5x, https://s1.ax1x.com/2023/07/29/pPS8zFK.png 2x" sizes="auto" data-title="diskpart" data-alt="diskpart" style="background: url(/svg/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;this.alt=this.dataset.alt;for(const a of ['style','data-title','data-alt','onerror','onload']){this.removeAttribute(a);}"/></a></p>
<p>如果看到 <strong>磁盘 0</strong> 的 <strong>GPT 列表</strong> 标注了一个 <strong>*</strong>，说明你符合我们的安装要求，
可以进行下一步操作了。</p>
<h2 id="划分空间">划分空间</h2>
<p>打开 <strong>磁盘管理器</strong>，右键 <code>C盘</code> 的主空间选择 <strong>压缩卷</strong> 在 <strong>输入压缩空间量</strong>
中输入你想给 Linux 划分的内存大小，单位 <em>MB（1GB = 1024MB）</em>
比如我这里分出去 <em>512GB</em>，也就是 <em>524,288 MB</em> 压缩完会看到一个黑色的未分配空间，
这时候我们进入下一步操作，<strong>不要右键新建简单卷！</strong></p>
<h2 id="关闭快速启动并关闭休眠">关闭快速启动并关闭休眠</h2>
<p>为了双系统的安全性着想，需要关闭 Windows 的 <code>快速启动</code> 并关闭 <code>休眠</code> 选项
至于为什么要关闭这两个选项见 <a href="https://wiki.archlinux.org/title/Dual_boot_with_Windows"target="_blank" rel="external nofollow noopener noreferrer">Dual boot with Windows<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>。</p>
<p>通过 <a href="https://dism.cf/"target="_blank" rel="external nofollow noopener noreferrer">Dism++<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 软件可以轻易的关闭这两个选项：</p>
<p>在 <code>Dism++</code> -&gt; <code>控制面板：系统优化</code> -&gt; <code>其它</code> 即可找到这两个选项并关闭。</p>
<p><strong>Windows 更新可能会自动开启这两个选项，因此每次重大更新后都应该检查
一下这两个选项的状态。</strong></p>
<h2 id="准备安装盘">准备安装盘</h2>
<p>准备一个至少 <code>8GB</code> 大小的 U盘，里面重要数据可以先备份一下，后面要格式化。</p>
<p>首先下载 <a href="https://rufus.ie/"target="_blank" rel="external nofollow noopener noreferrer">Rufus 烧录工具<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 和 <a href="https://archlinux.org/download/"target="_blank" rel="external nofollow noopener noreferrer">Arch Linux 镜像文件<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a>，镜像下载完后可以使用
以下指令验证文件的完整性：</p>
<div class="highlight" id="id-1"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">certutil -hashfile &lt;filename&gt; SHA256</span></span></code></pre></td></tr></table>
</div>
</div><p>然后复制输出的哈希值，去 Arch Linux 官网给出的 <code>sha256sum</code> 中核对有没有问题。
如果匹配则说明文件没有问题。</p>
<p>打开下载好的 <code>Rufus</code> 工具，选择你的安装介质和刚才下载的镜像，其它参数默认，
然后烧录。</p>
<p>烧录完成后不用拔出安装介质，直接重启电脑，进入 <code>BIOS 模式</code>，选择从你的 U盘 启动，
启动项一般包含 <code>UEFI</code> 字眼。</p>
<p>如果你不知道如何进入 <code>BIOS</code>，请自行百度。例：华硕进入 BIOS 按键。</p>
<p>如果发现无法从 U盘 启动，提示需要关闭 <code>Secure Boot</code> 的，请参考下文的方式关闭它。</p>
<h2 id="关闭-secure-boot">关闭 Secure Boot</h2>
<p>因为从外部介质启动系统会被 <code>Secure Boot</code> ban，所以这里需要先去 <code>BIOS</code> 中
禁用 <code>Secure Boot</code> 选项。</p>
<p>这个选项一般在 <code>BIOS</code> 的 <code>Advanced Settings</code> 的 <code>Security Settings</code> 选项中。
将 <code>Enable</code> 改为 <code>Disable</code> 。</p>
<p>关闭后请按照上面的说明再次进入 U盘 启动，在打开的选择界面中选择第一项进行系统的安装。</p>
<h2 id="arch-linux-系统安装">Arch Linux 系统安装</h2>
<h3 id="调大显示字体">调大显示字体</h3>
<div class="highlight" id="id-2"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">setfont ter-132b</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="确认是否为-uefi">确认是否为 UEFI</h3>
<div class="highlight" id="id-3"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls /sys/firmware/efi/efivars</span></span></code></pre></td></tr></table>
</div>
</div><p>如果用上面这条指令后输出了一堆东西则说明处于 <code>UEFI</code>，如果没有，
那你可能只能用 <code>Legacy</code> 启动了。</p>
<h3 id="禁用并停止自动匹配最快源服务">禁用并停止自动匹配最快源服务</h3>
<p><code>reflector</code> 会为你选择速度合适的镜像源，但其结果并不准确，同时会清空配置文件中的内容，
对于新人来讲并不适用，我们首先对其进行禁用。</p>
<div class="highlight" id="id-4"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl disable reflector.service
</span></span><span class="line"><span class="cl">systemctl stop reflector.service</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置时区">设置时区</h3>
<div class="highlight" id="id-5"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">timedatectl set-timezone Asia/Shanghai
</span></span><span class="line"><span class="cl">timedatectl status</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="分区">分区</h3>
<p>先用 <code>lsblk</code> 指令查看你的硬盘是哪块，然后通过 <code>cfdisk</code> 指令进行分区。</p>
<p>这是我的分区方案：</p>
<ul>
<li>4G - EFI</li>
<li>200G - root</li>
<li>300G - home</li>
<li>8G - swap</li>
</ul>
<p><code>cfdisk</code> 分好区之后记得要 <strong>设置类型</strong>。</p>
<p><strong><code>nvme0n1</code> 是我的硬盘 ID，记得替换为你自己的。</strong></p>
<div class="highlight" id="id-6"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">lsblk
</span></span><span class="line"><span class="cl">cfdisk /dev/nvme0n1</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="格式化分区">格式化分区</h3>
<ul>
<li>EFI 分区 格式化为 fat</li>
<li>root 分区 格式化为 ext4</li>
<li>home 分区 格式化为 ext4</li>
<li>创建并启用 swap 分区</li>
</ul>
<div class="highlight" id="id-7"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">lsblk
</span></span><span class="line"><span class="cl">mkfs.fat -F <span class="m">32</span> /dev/nvme0n1p5
</span></span><span class="line"><span class="cl">mkfs.ext4 /dev/nvme0n1p6
</span></span><span class="line"><span class="cl">mkfs.ext4 /dev/nvme0n1p7
</span></span><span class="line"><span class="cl">fallocate -l 8192M /mnt/swapfile
</span></span><span class="line"><span class="cl">chmod <span class="m">600</span> /mnt/swapfile
</span></span><span class="line"><span class="cl">mkswap -L swap /mnt/swapfile
</span></span><span class="line"><span class="cl">swapon /mnt/swapfile
</span></span><span class="line"><span class="cl">lsblk</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="挂载分区">挂载分区</h3>
<p><strong>挂载顺序：一定要先挂载 根分区，再挂载 EFI 分区，最后其它分区。</strong></p>
<div class="highlight" id="id-8"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mount /dev/nvme0n1p6 /mnt
</span></span><span class="line"><span class="cl">mkdir /mnt/efi
</span></span><span class="line"><span class="cl">mount /dev/nvme0n1p5 /mnt/efi
</span></span><span class="line"><span class="cl">mkdir /mnt/home
</span></span><span class="line"><span class="cl">mount /dev/nvme0n1p7 /mnt/home
</span></span><span class="line"><span class="cl">lsblk</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="换源">换源</h3>
<div class="highlight" id="id-9"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.bak
</span></span><span class="line"><span class="cl">cat /dev/null &gt; /etc/pacman.d/mirrorlist
</span></span><span class="line"><span class="cl">vim /etc/pacman.d/mirrorlist
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加如下源：
</span></span><span class="line"><span class="cl"><span class="nv">Server</span> <span class="o">=</span> https://mirrors.ustc.edu.cn/archlinux/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
</span></span><span class="line"><span class="cl"><span class="nv">Server</span> <span class="o">=</span> https://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
</span></span><span class="line"><span class="cl">保存并退出
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pacman -Sy</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装基础软件包">安装基础软件包</h3>
<p>所有 Arch Linux 必装：</p>
<ul>
<li><code>base</code></li>
<li><code>base-devel</code></li>
<li><code>linux-zen</code></li>
<li><code>linux-zen-headers</code></li>
<li><code>linux-firmware</code></li>
</ul>
<p>根据自己的 CPU 决定用哪个微码：<code>amd-ucode</code> / <code>intel-ucode</code></p>
<p>使用 X11 服务显示桌面：<code>xorg-xinit</code> <code>xorg-server</code></p>
<p>fcitx5 输入法（不需要中文输入的可以不装）：</p>
<ul>
<li><code>fcitx5</code></li>
<li><code>fcitx5-chinese-addons</code></li>
<li><code>fcitx5-configtool</code></li>
<li><code>fcitx5-gtk</code></li>
<li><code>fcitx5-material-color</code></li>
<li><code>fcitx5-pinyin-zhwiki</code></li>
</ul>
<p>这几个常用工具应该没人不需要吧：</p>
<ul>
<li><code>sudo</code></li>
<li><code>neofetch</code></li>
<li><code>vim</code></li>
<li><code>neovim</code></li>
<li><code>git</code></li>
<li><code>wget</code></li>
<li><code>proxychains</code></li>
<li><code>btop</code></li>
<li><code>bash-completion</code></li>
</ul>
<p>网络方面（没这些就别想用 <code>wlan</code> 了）：</p>
<ul>
<li><code>iwd</code></li>
<li><code>networkmanager</code></li>
</ul>
<p>音频输出：</p>
<ul>
<li><code>pipewire</code></li>
<li><code>pipewire-pulse</code></li>
<li><code>pipewire-alsa</code></li>
<li><code>pipewire-jack</code></li>
</ul>
<p>杂项（必装）：<code>e2fsprogs</code> <code>ntfs-3g</code></p>
<p>字体（不装的话所有中文都是乱码）：</p>
<ul>
<li><code>adobe-source-han-serif-cn-fonts</code></li>
<li><code>wqy-zenhei</code></li>
<li><code>noto-fonts-cjk</code></li>
<li><code>noto-fonts-emoji</code></li>
<li><code>noto-fonts-extra</code></li>
</ul>
<p>蓝牙（可选）：<code>bluez</code></p>
<div class="highlight" id="id-10"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pacstrap -i /mnt base base-devel linux-zen linux-zen-headers linux-firmware amd-ucode xorg-xinit xorg-server fcitx5 fcitx5-chinese-addons fcitx5-configtool fcitx5-gtk fcitx5-material-color fcitx5-pinyin-zhwiki sudo neofetch neovim git wget proxychains btop iwd networkmanager alsa-utils e2fsprogs ntfs-3g bash-completion pipewire pipewire-pulse pipewire-alsa pipewire-jack adobe-source-han-serif-cn-fonts wqy-zenhei noto-fonts-cjk noto-fonts-emoji noto-fonts-extra bluez</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="生成-fstab">生成 fstab</h3>
<div class="highlight" id="id-11"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">genfstab -U /mnt &gt;&gt;/mnt/etc/fstab
</span></span><span class="line"><span class="cl">cat /mnt/etc/fstab</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="挂载-mnt-分区">挂载 /mnt 分区</h3>
<div class="highlight" id="id-12"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">arch-chroot /mnt</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置用户和密码">设置用户和密码</h3>
<div class="highlight" id="id-13"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 此处分别设置：root 用户密码、添加自己日常使用的用户、设置用户权限组（注意逗号后面没空格）、为自己的账户设置密码、设置 wheel 组可以执行 sudo</span>
</span></span><span class="line"><span class="cl">passwd
</span></span><span class="line"><span class="cl">useradd -m cub3y0nd
</span></span><span class="line"><span class="cl">passwd cub3y0nd
</span></span><span class="line"><span class="cl">usermod -aG wheel,storage,power -s /usr/bin/zsh cub3y0nd
</span></span><span class="line"><span class="cl">sudo nvim /etc/sudoers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">取消注释第 <span class="m">89</span> 行：%wheel <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> ALL</span></span></code></pre></td></tr></table>
</div>
</div><p><em>如果你不会使用 vim，最好自己查询一下基础操作。</em></p>
<h3 id="设置系统语言">设置系统语言</h3>
<div class="highlight" id="id-14"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nvim /etc/locale.gen
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">取消注释第 <span class="m">171</span> 行：en_US.UTF-8 UTF-8
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">locale-gen
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;LANG=en_US.UTF-8&#39;</span> &gt; /etc/locale.conf
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置主机名和-hosts我的主机名是ashes">设置主机名和 hosts（我的主机名是ASHES）</h3>
<div class="highlight" id="id-15"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> ASHES &gt; /etc/hostname
</span></span><span class="line"><span class="cl">nvim /etc/hosts
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加以下内容：
</span></span><span class="line"><span class="cl">127.0.0.1        localhost
</span></span><span class="line"><span class="cl">::1              localhost
</span></span><span class="line"><span class="cl">127.0.0.1        ASHES.localdomain        localhost</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置时区并同步">设置时区并同步</h3>
<div class="highlight" id="id-16"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span><span class="line"><span class="cl">hwclock --systohc</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="双系统引导设置">双系统引导设置</h3>
<div class="highlight" id="id-17"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pacman -S grub efibootmgr os-prober ntfs-3g dosfstools mtools
</span></span><span class="line"><span class="cl">nvim /etc/default/grub
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">将 <span class="sb">`</span>GRUB_CMDLINE_LINUX_DEFAULT<span class="sb">`</span> 的所有内容改为 <span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">&#34;loglevel=5 nowatchdog&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">loglevel 改为 <span class="m">5</span> 是为了后续如果出现系统错误，方便排错
</span></span><span class="line"><span class="cl">加入 nowatchdog 参数，可以显著提高开关机速度
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">取消注释第 <span class="m">63</span> 行：GRUB_DISABLE_OS_PROBER<span class="o">=</span>false</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装-uefi">安装 UEFI</h3>
<p><strong>这一步使用 <code>MBR/Legacy Boot</code> 的同学需要修改该指令，具体怎么改可以自己上网查询。</strong></p>
<div class="highlight" id="id-18"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grub-install --target<span class="o">=</span>x86_64-efi --efi-directory<span class="o">=</span>/efi --bootloader-id<span class="o">=</span>Arch --recheck</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="生成-grub-配置">生成 grub 配置</h3>
<div class="highlight" id="id-19"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grub-mkconfig -o /boot/grub/grub.cfg</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置网络服务开机自启">设置网络服务开机自启</h3>
<div class="highlight" id="id-20"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">systemctl <span class="nb">enable</span> NetworkManager.service</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="结束安装取消所有挂载点并重启">结束安装，取消所有挂载点并重启</h3>
<div class="highlight" id="id-21"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">exit</span>
</span></span><span class="line"><span class="cl">umount -lR /mnt
</span></span><span class="line"><span class="cl">reboot</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>重启指令执行后就可以拔掉安装介质了。其实在 <code>archiso</code> 启动完毕之后
就可以拔掉安装介质了（copy2ram）。</strong></p>
<p>重启后的选项卡列表里面可以看到有关 <code>Arch Linux</code> 的启动选项。
确认一下是否存在 <code>Windows</code> 的启动选项，如果不存在的话，先进入 <code>Arch Linux</code>，
然后使用以下命令添加 <code>Windows 启动项</code> 。</p>
<p><strong><code>mount</code> 中的 <code>/dev/nvme0n1p1</code> 是我的 <code>Windows EFI</code> 扇区名称，记得替换为你自己的 <code>EFI 扇区</code> 。</strong></p>
<p>使用 <code>MBR/Legacy Boot</code> 的同学，下面的 <code>mkdir</code> 指令也需要修改，不能照抄。</p>
<div class="highlight" id="id-22"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p /boot/EFI/Windows
</span></span><span class="line"><span class="cl">lsblk
</span></span><span class="line"><span class="cl">mount /dev/nvme0n1p1 /boot/EFI/Windows</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="bspwm">Bspwm</h2>
<p>接下来就可以使用我编写的自动化脚本配置一些常用环境了。
请确保你已配置好科学上网环境，如果没有科学上网环境的话安装过程可能不能稳定进行。</p>
<p>这是我的仓库地址：</p>
<a href="https://github.com/CuB3y0nd/1llusion"target="_blank" rel="external nofollow noopener noreferrer" class="card-link"><span class="cl-backdrop" style="--cl-bg-url: url(/fixit.min.svg);"></span>
    <span class="cl-content">
      <span class="cl-text">
        <span class="cl-title">1llusion</span>
        <span class="cl-meta">
          <svg class="cl-icon-link" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1z" fill="#a9a9b3"></path><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" fill="#a9a9b3"></path></svg>
          <span class="cl-url">https://github.com/CuB3y0nd/1llusion</span>
        </span>
      </span><svg class="cl-icon-globe" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M960 512c0 249.408-203.2 448-448 448-244.778667 0-448-198.592-448-448S262.592 64 512 64s448 198.592 448 448" fill="#2196F3"></path><path d="M507.52 718.08c0-8.96-4.48-13.44-13.44-17.92-26.88-8.96-53.76-8.96-76.16-31.381333-4.48-8.96-4.48-17.92-8.96-26.88-8.96-8.96-31.36-13.44-44.8-17.92h-89.6c-13.44-4.48-22.4-22.4-31.36-35.84 0-4.48 0-13.461333-8.96-13.461334-8.96-4.458667-17.92 4.501333-26.88 0-4.48-4.458667-4.48-8.96-4.48-13.418666 0-13.461333 8.96-26.901333 17.92-35.861334 13.44-8.96 26.88 4.48 40.32 4.48 4.48 0 4.48 0 8.96 4.48 13.44 4.48 17.92 22.4 17.92 35.861334v8.96c0 4.48 4.48 4.48 8.96 4.48 4.48-22.4 4.48-44.821333 8.96-67.2 0-26.88 26.88-53.781333 49.28-62.72 8.96-4.458667 13.44 4.501333 22.4 0 26.88-8.96 94.08-35.84 80.64-71.658667-8.96-31.381333-35.84-62.698667-71.68-58.24-8.96 4.501333-13.44 8.96-22.4 13.461333-13.44 8.96-40.32 35.84-53.76 35.84-22.4-4.48-22.4-35.84-17.92-49.301333 4.48-17.92 44.8-76.138667 71.68-67.178667l17.92 17.92c8.96 4.48 22.4 4.48 35.84 4.48 4.48 0 8.96 0 13.44-4.48 4.48-4.48 4.48-4.48 4.48-8.96 0-13.44-13.44-26.901333-22.4-35.861333s-22.4-17.92-35.84-22.378667c-44.8-13.461333-116.48 4.458667-152.32 35.84-35.84 31.36-62.72 85.12-80.64 129.92-8.96 26.88-17.92 62.698667-22.4 94.08-4.48 22.4-8.96 40.32 4.48 62.698667 13.44 26.88 40.32 53.781333 67.2 71.68 17.92 13.44 53.76 13.44 71.68 35.84 13.44 17.941333 8.96 40.32 8.96 62.72 0 26.88 17.92 49.28 26.88 71.658667 4.48 13.461333 8.96 31.381333 13.44 44.821333 0 4.48 4.48 31.36 4.48 35.84 26.88 13.44 49.28 26.901333 80.64 35.861333 4.48 0 22.4-26.901333 22.4-31.381333 13.44-13.44 22.4-31.36 35.84-40.32 8.96-4.48 17.92-8.96 26.88-17.941333 8.96-8.96 13.44-26.88 17.92-40.32 4.48-8.938667 8.96-26.858667 4.48-40.298667M516.48 305.92c4.48 0 8.96-4.48 17.92-8.96 13.44-8.96 26.901333-22.4 40.32-31.36 13.461333-8.96 26.901333-22.4 35.861333-31.36 13.44-8.96 22.4-26.88 26.88-40.341333 4.48-8.96 17.941333-26.88 13.44-40.32-4.48-8.96-26.88-13.44-35.84-17.92C579.2 126.698667 547.84 122.24 512 122.24c-13.44 0-31.36 4.458667-35.84 17.92-4.48 22.4 13.44 17.92 31.36 22.4 0 0 4.48 35.84 4.48 40.32 4.48 22.421333-8.96 35.84-8.96 58.24 0 13.44 0 35.84 8.96 44.8h4.48zM892.8 619.52c4.501333-8.96 4.501333-22.4 8.96-31.36 4.501333-22.421333 4.501333-44.8 4.501333-67.2 0-44.8-4.501333-89.578667-17.92-129.92-8.96-13.44-13.461333-26.88-17.941333-40.341333-8.96-22.378667-22.4-44.8-40.32-62.698667-17.92-22.4-40.341333-85.12-80.64-67.2-13.44 4.501333-22.4 22.421333-31.36 31.381333l-26.88 40.32c-4.501333 4.48-8.96 13.44-4.501333 17.92 0 4.48 4.501333 4.48 8.96 4.48 8.96 4.501333 13.461333 4.501333 22.421333 8.96 4.48 0 8.96 4.501333 4.48 8.96 0 0 0 4.501333-4.48 4.501334-22.421333 22.4-44.8 40.32-67.2 62.698666-4.48 4.48-8.96 13.44-8.96 17.92s4.48 4.48 4.48 8.96c0 4.501333-4.48 4.501333-8.96 8.96-8.96 4.501333-17.92 8.96-22.4 13.461334-4.48 8.96 0 22.4-4.48 31.36-4.48 22.4-17.941333 40.32-26.901333 62.72-8.96 13.418667-13.418667 26.88-22.378667 40.32 0 17.92-4.501333 31.36 4.458667 44.8 22.421333 31.36 62.72 13.44 94.08 26.901333 8.96 4.458667 17.92 4.458667 22.421333 13.418667 13.418667 13.461333 13.418667 35.861333 17.92 49.301333 4.458667 17.92 8.96 35.84 17.92 53.76 4.48 22.421333 13.44 44.821333 17.92 62.72 40.341333-31.36 76.16-67.178667 103.04-112 26.88-31.424 40.341333-67.242667 53.76-103.104" fill="#CDDC39"></path></svg></span></a>
<p><strong>确保 fcitx 在 wm（windows manager）环境中启动，并启动 bspwm。</strong></p>
<div class="highlight" id="id-23"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nvim /etc/environment
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加以下行：
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">GTK_IM_MODULE</span><span class="o">=</span>fcitx
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">QI_IM_MODULE</span><span class="o">=</span>fcitx
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">XMODIFIERS</span><span class="o">=</span>@im<span class="o">=</span>fcitx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cp /etc/X11/xinit/xinitrc ~/.xinitrc
</span></span><span class="line"><span class="cl">nvim ~/.xinitrc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">注释以下行：
</span></span><span class="line"><span class="cl">twm <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">xclock -geometry 50x50-1+1 <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">xterm -geometry 80x50+494+51 <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl">xterm -geometry 80x20+494-0 <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="nb">exec</span> xterm -geometry 80x66+8+0 -name login
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加以下行：
</span></span><span class="line"><span class="cl">fcitx5 <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="nb">exec</span> bspwm</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="下载脚本">下载脚本</h3>
<div class="highlight" id="id-24"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span>
</span></span><span class="line"><span class="cl">curl https://raw.githubusercontent.com/CuB3y0nd/1llusion/master/install -o <span class="nv">$HOME</span>/install</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="授予执行权限">授予执行权限</h3>
<div class="highlight" id="id-25"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x install</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="运行脚本">运行脚本</h3>
<div class="highlight" id="id-26"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">./install</span></span></code></pre></td></tr></table>
</div>
</div><p><em><strong>请不要使用 root 权限运行该脚本！</strong></em></p>
<p>脚本执行结束后重启，使用 <code>startx</code> 指令即可进入 <code>bspwm</code> 。</p>
<h2 id="amd--nvidia-双显卡驱动安装">AMD + NVIDIA 双显卡驱动安装</h2>
<h3 id="基础包安装">基础包安装</h3>
<div class="highlight" id="id-27"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo pacman -S xf86-video-amdgpu
</span></span><span class="line"><span class="cl">sudo pacman -S nvidia-dkms nvidia-settings nvidia-prime
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># glmark2 是开源性能测试工具，可选</span>
</span></span><span class="line"><span class="cl">sudo pacman -S glmark2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">yay -S optimus-manager optimus-manager-qt --noconfirm</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="配置-optimus-manager">配置 optimus-manager</h3>
<div class="highlight" id="id-28"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp /usr/share/optimus-manager.conf /etc/optimus-manager/optimus-manager.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo -E nvim /etc/optimus-manager/optimus-manager.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">将 <span class="sb">`</span>pci_power_control<span class="sb">`</span> 改为 <span class="sb">`</span>yes<span class="sb">`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">在 <span class="sb">`</span><span class="o">[</span>amd<span class="o">]</span><span class="sb">`</span> 下，将 <span class="sb">`</span>driver<span class="sb">`</span> 改为 <span class="sb">`</span>amdgpu<span class="sb">`</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="防止内核冲突">防止内核冲突</h3>
<div class="highlight" id="id-29"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo -E nvim /etc/mkinitcpio.conf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">把 <span class="sb">`</span>kms<span class="sb">`</span> 从 <span class="sb">`</span>HOOKS<span class="sb">`</span> 里面移除
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo mkinitcpio -p linux-zen</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="切换教程">切换教程</h3>
<div class="highlight" id="id-30"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo -E nvim ~/.xinitrc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">添加 <span class="sb">`</span>/usr/bin/prime-offload<span class="sb">`</span></span></span></code></pre></td></tr></table>
</div>
</div><p>使用 <code>optimus-manager --print-mode</code> 可以查看当前使用的显卡。</p>
<p>使用 <code>optimus-manager --switch nvidia</code> 可以切换到 <code>nvidia</code> 显卡。</p>
<p>切换显卡前需要先执行 <code>prime-offload</code>，切换显卡重新登陆后需要执行 <code>sudo prime-switch</code> 。</p>
<p>可以允许 <code>wheel</code> 身份组以管理员权限执行 <code>prime-switch</code> 不用输入密码：</p>
<div class="highlight" id="id-31"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo -E nvim /etc/sudoers
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%wheel <span class="nv">ALL</span><span class="o">=(</span>ALL:ALL<span class="o">)</span> NOPASSWD:/usr/bin/prime-switch</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="faq">FAQ</h2>
<h3 id="这个-bspwm-提供了哪些快捷键">这个 bspwm 提供了哪些快捷键？</h3>
<p>请看 <a href="https://github.com/CuB3y0nd/1llusion/wiki"target="_blank" rel="external nofollow noopener noreferrer">wiki<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。</p>
<h3 id="eww-无法编译部分使用-eww-小组件-的主题eg-z0mbi3无法使用">eww 无法编译/部分使用 eww 小组件 的主题（e.g. z0mbi3）无法使用</h3>
<p>请看 <a href="https://github.com/gh0stzk/dotfiles/issues/86#issuecomment-1638235631"target="_blank" rel="external nofollow noopener noreferrer">issue<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。</p>
<h3 id="为什么有网络但是状态栏始终显示-offline">为什么有网络但是状态栏始终显示 Offline？</h3>
<p>请看 <a href="https://github.com/CuB3y0nd/1llusion/wiki/Firsts-steps-after-installing"target="_blank" rel="external nofollow noopener noreferrer">wiki<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。</p>
<h3 id="你的-bspwm-不适配我的显示器分辨率我该怎么调整">你的 bspwm 不适配我的显示器分辨率，我该怎么调整？</h3>
<p>你可以参考 <a href="https://wiki.archlinuxcn.org/wiki/Xorg"target="_blank" rel="external nofollow noopener noreferrer">Xorg<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 和 <a href="https://wiki.archlinuxcn.org/wiki/HiDPI"target="_blank" rel="external nofollow noopener noreferrer">HiDPI<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。
使用 <code>echo 'Xft.dpi:&lt;大小&gt;' &gt;&gt; ~/.Xresources</code> 指令来配置。</p>
<h3 id="为什么我的-neovim-图标显示不出来">为什么我的 neovim 图标显示不出来？</h3>
<p>请安装 <a href="https://github.com/ryanoasis/nerd-fonts"target="_blank" rel="external nofollow noopener noreferrer">nerd-fonts<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。</p>
<p>我使用 <code>JetBrainsMono</code> 作为 <code>neovim</code> 的字体，指令如下：</p>
<div class="highlight" id="id-32"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/ryanoasis/nerd-fonts.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> nerd-fonts
</span></span><span class="line"><span class="cl">./install.sh JetBrainsMono</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="neovim-打开一堆报错">neovim 打开一堆报错</h3>
<p>确保你配置好了科学上网环境之后可以配置好 <code>proxychains</code>，用它打开 nvim，
或者你也可以直接配置好 <code>git</code> 的全局代理，然后多开几次 <code>nvim</code>。
每次打开 <code>nvim</code> 都会自动安装丢失的依赖，失败了就多重试几次，总是可以解决问题的。</p>
<p><strong>我通过其它桌面环境配置了科学上网，卸载桌面后使用你的 bspwm，但是有些功能用不了。</strong></p>
<p>如果你卸载桌面环境的时候同时删除了依赖，请自行确定哪些 <code>bspwm</code> 所需要的依赖
没有安装，重新安装即可修复。</p>
<h3 id="更多问题都请移步-wiki">更多问题都请移步 wiki</h3>
<p><a href="https://github.com/CuB3y0nd/1llusion/wiki"target="_blank" rel="external nofollow noopener noreferrer">wiki<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> 。</p></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="更新于 2023-07-29 13:36:00">更新于 2023-07-29&nbsp;</span>
      </div></div>
    <div class="post-info-line">
      <div class="post-info-md"><span><a href="/archlinux-dualboot-and-bspwm-configure/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/" data-title="Arch Linux 双系统 &#43; Bspwm 配置小记" data-via="CuB3y0nd" data-hashtags="Arch Linux,Bspwm"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/" data-hashtag="Arch Linux"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/" data-title="Arch Linux 双系统 &#43; Bspwm 配置小记"><i class="fa-brands fa-hacker-news fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://www.cubeyond.net/archlinux-dualboot-and-bspwm-configure/"><i class="fa-brands fa-reddit fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href='/tags/arch-linux/' class="post-tag">Arch Linux</a><a href='/tags/bspwm/' class="post-tag">Bspwm</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="/ic-card-replay-attack/" class="post-nav-item" rel="prev" title="校园卡破解"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>校园卡破解</a>
      <a href="/chinese-copywriting-guidelines/" class="post-nav-item" rel="next" title="中文文案排版指北">中文文案排版指北<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus">
          <script
            src="https://giscus.app/client.js"
            data-repo="CuB3y0nd/CuB3y0nd.github.io"
            data-repo-id="R_kgDOKDbydA"
            data-category="Announcements"
            data-category-id="DIC_kwDOKDbydM4CYYS0"
            data-mapping="pathname"
            data-strict="0"
            
            data-theme="preferred_color_scheme"
            data-reactions-enabled="1"
            data-emit-metadata="1"
            data-input-position="top"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async
            defer
          ></script>
        </div>
        <noscript>
          Please enable JavaScript to view the comments powered by <a href="https://giscus.app/" rel="external nofollow noopener noreferrer">giscus</a>.
        </noscript></div></article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered order-1">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.116.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.18"><img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright order-2" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2022 - 2023</span><span class="author" itemprop="copyrightHolder">
              <a href="/">CuB3y0nd</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div><div class="footer-line statistics order-first"><span class="site-time" title='网站运行中…'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden="true"></i><span class="run-times ms-1">网站运行中…</span></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div><div class="fixed-button view-comments d-none" role="button" aria-label="查看评论"><i class="fa-solid fa-comment fa-fw" aria-hidden="true"></i></div></div><a href="https://github.com/CuB3y0nd/CuB3y0nd.github.io" title="View source on GitHub"target="_blank" rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;--bg-progress: black;--bg-progress-dark: white;"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/lightgallery/css/lightgallery-bundle.min.120f067ebd6f322339e2ccccd7e87e334d7c7ea5b2bd553f325f2ae3c3ae6fe8.css" integrity="sha256-Eg8Gfr1vMiM54szM1&#43;h&#43;M018fqWyvVU/Ml8q48Oub&#43;g="><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.cd0d0b6e50ff01ff2f3a9a70d7cfb66a7c6cb9acf7a566325568be6d3bd31fc4.css" integrity="sha256-zQ0LblD/Af8vOppw18&#43;2anxsuaz3pWYyVWi&#43;bTvTH8Q="><link rel="stylesheet" href="/lib/pace/themes/black/pace-theme-minimal.1412d33acb0e8c099edcf3734458ded6efefafeca31e2df79e36737c6ad0c281.css" integrity="sha256-FBLTOssOjAme3PNzRFje1u/vr&#43;yjHi33njZzfGrQwoE="><script src="/lib/autocomplete/autocomplete.min.ae2da1bd62c6469ee27770ad1cddf2e8296d8a7f6d85b091463e5200c5e320af.js" integrity="sha256-ri2hvWLGRp7id3CtHN3y6Cltin9thbCRRj5SAMXjIK8=" defer></script><script src="/lib/fuse/fuse.min.c57339c3fa16b1d69d9a6b46749a8139ef8d4fc9bbfe48144ff897aa7d4222ec.js" integrity="sha256-xXM5w/oWsdadmmtGdJqBOe+NT8m7/kgUT/iXqn1CIuw=" defer></script><script src="/lib/lightgallery/lightgallery.min.a109d6550e0f5c7f5ad89c835407ceb18ed48d1e50d6d9b6c37234d5ee7ebaa8.js" integrity="sha256-oQnWVQ4PXH9a2JyDVAfOsY7UjR5Q1tm2w3I01e5+uqg=" defer></script><script src="/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.baa7d26c390a254160ee3ae0f09a9a16c77d1a5b4b6853c5e4487de764fee24b.js" integrity="sha256-uqfSbDkKJUFg7jrg8JqaFsd9GltLaFPF5Eh952T+4ks=" defer></script><script src="/lib/lightgallery/plugins/zoom/lg-zoom.min.056f82747a5949da14472c62a803167ecbdc3f847fc44755e5b33ec7f1319f02.js" integrity="sha256-BW+CdHpZSdoURyxiqAMWfsvcP4R/xEdV5bM+x/ExnwI=" defer></script><script src="/lib/sharer/sharer.min.ba5171a78670b031914e623431a33a3d73c1ea9897e552ba73bc2c2da7c777b9.js" integrity="sha256-ulFxp4ZwsDGRTmI0MaM6PXPB6piX5VK6c7wsLafHd7k=" async defer></script><script src="/lib/typeit/index.umd.16f3fa3374a7eea31f19672293edc98326413002dea74b8c413a74f1b7e4f1cf.js" integrity="sha256-FvP6M3Sn7qMfGWcik+3JgyZBMALep0uMQTp08bfk8c8=" defer></script><script src="/lib/cookieconsent/cookieconsent.min.e55842a856a6d829feca3c3ad736c136b6c7549e9247274f78aa296259e06e24.js" integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" defer></script><script src="/lib/pace/pace.min.82a77b6138e0fc1b5fa964b0b093af9dd97407173c8052262c4917413f3eaa3d.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" async defer></script><script>window.config={"autoBookmark":true,"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"enable":true,"expired":false,"giscus":{"darkTheme":"dark_dimmed","lightTheme":"light"}},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"data":{"typeit-header-subtitle-desktop":"To learn and record!","typeit-header-subtitle-mobile":"To learn and record!"},"lightgallery":true,"search":{"distance":100,"findAllMatches":true,"fuseIndexURL":"/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":false,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"没有找到结果","snippetLength":30,"threshold":0.3,"type":"fuse","useExtendedSearch":true},"siteTime":"2022-10-01T12:00:00+08:00","typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},"duration":-1,"loop":false,"speed":100}};</script><script src="/js/theme.min.3c3127b3e9be8812325146e25c97aefeb64c380012799edc48d3db387b9b2fc8.js" integrity="sha256-PDEns+m+iBIyUUbiXJeu/rZMOAASeZ7cSNPbOHubL8g=" defer></script></body>
</html>
